<!-- This is a visualizer using Google Fusion Tables for Route Processing and County Choropleth -->

<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple Polylines</title>

    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #mymap {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="mymap"></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=INSERTKEYHERE&signed_in=true&libraries=geometry"></script>
    <script src="gmaps.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/src/maplabel.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script>       
    
    jQuery(document).ready(function () {
            /*
      //load states from xml
      polys = [];
      jQuery.get("https://dl.dropboxusercontent.com/u/4055172/site/states.xml", {}, function(data){
        jQuery(data).find("state").each(function() {
          var colour = this.getAttribute('colour');
          var points = this.getElementsByTagName("point");
          var pts = [];
          for (var i = 0; i < points.length; i++) {
            pts[i] = new google.maps.LatLng(parseFloat(points[i].getAttribute("lat")), parseFloat(points[i].getAttribute("lng")));
          }
          var poly = new google.maps.Polygon({
            paths: pts,
            strokeColor: '#000000',
            strokeOpacity: 1,
            fillColor: colour,
            fillOpacity: 0.35
          });
          polys.push(poly);
          poly.setMap(map);
        });
      });
      */
      
      
           map = new GMaps({
              div: '#mymap',
              lat: 41.5392,
              lng:  -99.7968,
              zoom:4
            });
            	   styles = [{"stylers": [ { "lightness": 100 }, { "saturation": -57 } ]}]
	   map.addStyle({
		styledMapName:"Styled Map",
		styles: styles,
		mapTypeId: "map_style"
		});
		map.setStyle("map_style");
            
            /*
            //states
            layer = map.loadFromFusionTables({
                query: {
                    select: 'geometry',
                    from: '11VZsKZW2SREW4ERn_UJkMP1D34EEwINsm1XSqslG',
                    where: 'penalty>0'
                  },
                  styleId: 2,
            })
            console.log(layer)
            google.maps.event.addListener(layer, 'click', function(e) {
                e.infoWindowHtml = e.row['State-County'].value +"<br><br>Penalty: " + e.row['penalty'].value +"<br>Rank: " + e.row['rank'].value;
        });
            */
            
            
         //route polyline
         overview=
"aunwFflubMidDvzIlnDf~Qz]~|M_i@`qNl{CxdL|xEzcLng@rwRsJd~b@j~@vq\\iq@f`VgcDx_T`hCjiHcdDvuChtIfnR~qH``TfhAhsKeo@boMerBhkK~q@voS|Stkc@lpKfkn@n{OfilApsQvho@jnDftScx@piK~hD`iG`_Gz}UzyDvtUlzG~rfAdvCfdJsrAh`LbjJrmS~bE`jTrtBpzFh\\drKcaAdrH~xB~wI~hH`{VwuAvzQo{@baQotF`qO|_GzmNoId~IboE~ePu|@~~DniEdeFw}DtkZ}sFhpXiuFpiIuoFhaKcdDbqPzjBncQi`G|tGm_@bdHkfEpaJyjDrvMxa@`cKlcDx`F~dId`^~pC`lGeuB`bIs_D`jM_qAbyLJd_Mq`CfzL~uIzmMphBhuTtmAnaLfsF`uMlcCf~D{EtqHgp@b|]_zB~~Ip[dtSrn@|pc@ziC|zm@x{DpwOdaAlyMocAj|NvlCdoKlrBvqd@nhChdSuM|zZteA`~Rw{@jtj@sXnmk@pnAf~_@j_@tzIo_CvuBqB|kIqgCjtR_h@dtZfvFbpg@nv@nd_@psDd{RnsAlmMoRxeWdoDt{[iLxwQv`Ar~o@vyBvoW`u@zpg@ox@ntNmlEhbHjaBbdd@tMbqb@nr@hxy@`pFl{oAfo@x}\\vtDnpEn_BjxCjBrqHfeHntLphUn{q@tsLxbcAv|G~{Vl|Crv`@`_Cp_k@olBlvJjxApfK|jA~jQd}Czg\\fe[lglAxmN|tb@tiDh``@rxFljG`{Dj~L~yRbnbAu\\vxWlxHvqWnrMddf@xyExbVtqE~y]tvDvb]~uEpbGpcBlfJtdFbcMbzCdsOvnDjeK|s@f~Tp_HfhQzkEp`ZxjCjbGmD|aIb~B|tYxgAzbOxeDr_HdiJjeHxsHlxI`kFhjMhs@|yDbiGj~DrtKziKvdXjln@`hPxo}@vdCtaE`]|fJpiAtiUfgEleHxeEdoAd~CxeLvxC~nRvrDjmJb`AzoPbbC||YvPvfOjvLxmNbiQllQjcInwOti]foOprJp|I|aCrxEbiEjaP`yBltRjBbfZtmDjmIvbFpkb@|v@ngS~kLnqUrlC`gOf}@nhZya@l_m@FtiYl{EfxVnrFtgMppAbmJxwGzzIb~Izt\\jxJb`FbqP|eGn`DfnGduMjf`@bxF|kL`lV~~Kptd@rqLdm`@fkEd~XhsBbrLtxBn_V~]`yQhG~wJhgItr\\htM`k\\byIdpHd`CDnjHHdfFguCvj@smDHa`Cg}A`aBwjF"         
var decodedPath = google.maps.geometry.encoding.decodePath(overview);  
         //decodedPath=  [[40.712650,-74.006600],[40.739100,-74.062240],[40.711030,-74.159400],[40.706090,-74.235880],[40.687780,-74.383060],[40.646430,-74.551620],[40.648290,-74.735810],[40.646200,-75.005250],[40.672480,-75.112900],[40.650550,-75.160640],[40.676970,-75.184760],[40.622360,-75.284480],[40.573240,-75.392170],[40.569230,-75.531120],[40.587660,-75.594530],[40.579500,-75.699610],[40.576150,-75.885960],[40.511920,-76.128560],[40.425440,-76.524440],[40.329990,-76.771760],[40.301930,-76.877560],[40.311070,-76.940690],[40.283870,-76.983260],[40.242900,-77.100840],[40.206920,-77.156370],[40.186270,-77.232940],[40.109690,-77.380530],[40.052070,-77.485630],[39.948550,-77.611840],[39.805740,-77.706960],[39.675540,-77.734580],[39.617960,-77.783620],[39.585600,-77.839690],[39.539690,-77.915210],[39.487570,-77.974730],[39.365160,-78.047280],[39.238690,-78.121010],[39.187260,-78.135920],[39.142270,-78.171830],[39.009150,-78.301610],[39.000420,-78.388760],[38.916750,-78.493240],[38.770080,-78.624480],[38.692360,-78.655650],[38.448660,-78.839270],[38.372520,-78.919570],[38.277690,-78.936590],[38.229340,-78.975970],[38.100040,-79.070570],[37.999000,-79.175230],[37.903640,-79.266200],[37.854890,-79.354630],[37.773860,-79.402040],[37.679310,-79.495840],[37.646290,-79.556900],[37.602260,-79.620230],[37.531820,-79.689150],[37.468070,-79.812850],[37.421550,-79.881690],[37.371430,-79.916900],[37.317560,-80.048780],[37.250200,-80.190090],[37.185710,-80.284930],[37.117300,-80.415370],[37.090410,-80.578130],[37.068950,-80.706210],[37.012560,-80.740550],[36.988830,-80.816220],[36.946760,-80.939050],[36.946520,-81.033840],[36.965510,-81.075650],[36.940750,-81.151710],[36.874510,-81.398930],[36.826680,-81.506900],[36.806580,-81.628260],[36.773510,-81.773410],[36.711730,-81.939510],[36.606060,-82.220600],[36.535190,-82.385280],[36.476590,-82.488550],[36.417210,-82.585190],[36.355130,-82.725930],[36.248170,-82.974070],[36.153920,-83.241670],[36.066110,-83.391480],[35.983800,-83.632280],[36.007780,-83.836040],[35.973230,-83.920450],[35.869850,-84.257130],[35.879110,-84.360320],[35.878140,-84.503060],[35.905850,-84.621400],[35.895210,-84.700260],[35.883620,-84.818170],[35.966730,-84.989140],[36.056790,-85.177230],[36.121660,-85.252070],[36.140990,-85.305690],[36.132150,-85.358780],[36.146840,-85.408940],[36.135280,-85.471440],[36.128240,-85.672570],[36.097590,-85.712230],[36.104530,-85.756350],[36.138590,-85.810740],[36.177930,-85.939800],[36.167270,-86.097920],[36.190210,-86.173220],[36.182360,-86.299250],[36.161930,-86.619500],[36.140860,-86.719600],[36.121950,-86.754620],[36.121850,-86.804020],[36.156480,-86.824150],[36.146570,-86.878680],[36.089220,-86.941350],[36.080360,-87.110230],[36.038280,-87.156770],[36.030280,-87.209630],[36.014720,-87.371600],[35.962610,-87.547490],[35.883910,-87.686790],[35.864860,-87.896680],[35.868650,-87.981460],[35.818850,-88.151010],[35.808470,-88.309000],[35.755720,-88.507450],[35.675990,-88.799620],[35.574520,-89.129950],[35.537180,-89.253060],[35.438440,-89.337320],[35.312700,-89.581600],[35.165350,-89.861640],[35.192780,-89.925800],[35.188250,-90.017810],[35.149890,-90.024940],[35.155570,-90.115790],[35.169630,-90.197390],[35.148200,-90.326360],[35.095470,-90.617500],[35.032250,-90.731410],[35.030470,-90.810790],[34.934420,-91.081950],[34.902750,-91.233830],[34.846250,-91.375470],[34.798180,-91.772340],[34.778930,-92.203510],[34.769900,-92.261900],[34.732890,-92.262260],[34.704590,-92.293830],[34.676150,-92.365020],[34.605620,-92.535020],[34.531920,-92.677840],[34.302730,-92.945280],[34.193180,-93.060140],[34.125630,-93.089270],[33.980670,-93.200090],[33.914770,-93.281560],[33.788200,-93.454270],[33.634180,-93.715420],[33.586220,-93.839610],[33.482640,-93.980370],[33.463990,-94.070000],[33.464210,-94.183050],[33.475140,-94.416790],[33.442260,-94.521410],[33.377820,-94.615600],[33.313010,-94.695440],[33.261530,-94.830920],[33.186910,-94.947550],[33.161080,-95.128330],[33.165800,-95.299740],[33.138930,-95.571220],[33.119640,-95.632570],[33.119650,-95.722260],[33.129780,-95.997370],[33.113340,-96.101240],[32.999380,-96.239290],[32.953120,-96.357620],[32.810060,-96.654980],[32.771390,-96.811170],[32.759900,-97.126980],[32.734750,-97.424510],[32.729680,-97.605640],[32.749670,-97.723650],[32.728250,-97.794540],[32.726780,-97.879640],[32.675210,-98.018140],[32.583670,-98.149030],[32.569680,-98.213080],[32.508540,-98.434770],[32.456440,-98.650870],[32.408910,-98.772730],[32.375550,-98.934450],[32.376320,-99.169990],[32.440700,-99.646310],[32.427020,-99.695000],[32.388370,-99.732000],[32.291640,-99.759570],[32.241540,-99.759530],[32.215020,-99.795060],[32.153900,-99.834740],[32.067160,-99.925880],[32.003590,-99.957760],[31.965920,-99.937830],[31.968600,-99.901640]]
         map.drawPolyline({
            path: decodedPath,
            geodesic: true,
            strokeColor: '#FF0000',
            strokeOpacity: 1.0,
            strokeWeight: 2
        })
        
        
        //day markers
        markers = 
[[39.978030000000004, -78.74693], [39.942170000000004, -83.47265], [39.16946, -88.37783], [37.58883, -92.73529], [35.3466154, -95.64575549999999]]





        $(markers).each(function(k,v){
            map.addMarker({
                lat:this[0],
                lng:this[1],
                label:(k+1).toString(),
            })
        })
        
        
        //add temperature labels
        /*
        $.ajax({
            url: "https://www.googleapis.com/fusiontables/v2/query",
            type: "POST",
            data: {
                sql: "Select center, temperature From 1sJ05KGmXEd5HD3HVoK66lSotJ6ad-KbUh6ae3Tmq",
                key: "INSERT KEY HERE"
            },
            success: function (data) {
            for (i = 0; i < data.rows.length; i++) {
                latlong=data.rows[i][0].split(',')
                //console.log(data.rows[i][1], latlong[0], latlong[1])
                new MapLabel({
                    text: data.rows[i][1],
                    position: new google.maps.LatLng(parseFloat(latlong[0]),parseFloat(latlong[1])*-1),
                    map: map.map,
                    fontSize: 12,
                    align: 'right'
                });
            }
            }
        });*/

    });

    </script>
  </body>
</html>